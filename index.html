
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <title>My boss rocks  A tribute.</title>

    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/style.css">
    <script src="pizzicato.js"></script>
    <link rel="icon" type="image/png" href="images/favicon.png">

    <meta name="title" content="My boss rocks  A tribute.">
    <meta name="description" content="Het is vandaag Dag van de Ondernemer. Wij bieden ons eerbetoon aan Kevin Heylen, onze rockstar baas">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://mybossrocks.be/">
  <meta property="og:title" content="My boss rocks  A tribute.">
  <meta property="og:description" content="Het is vandaag Dag van de Ondernemer. Wij bieden ons eerbetoon aan Kevin Heylen, onze rockstar baas">
  <meta property="og:image" content="https://mybossrocks.be/images/share.png">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://mybossrocks.be/">
  <meta property="twitter:title" content="My boss rocks  A tribute.">
  <meta property="twitter:description" content="Het is vandaag Dag van de Ondernemer. Wij bieden ons eerbetoon aan Kevin Heylen, onze rockstar baas">
  <meta property="twitter:image" content="https://mybossrocks.be/images/share.png">

</head>
<body class="relative">

<div class="w-1/6 p-10 absolute bottom-0 z-50">
    <img src="/images/mybossrocks.png" alt="Our boss rocks">
</div>

<!-- pedals -->
<div class="flex justify-center relative pt-10">
    <span class="pedal" data-pedal data-pedal-key="81"><img src="/images/pedals/femke.png" alt="Femme" /></span>
    <span class="pedal" data-pedal data-pedal-key="83"><img src="/images/pedals/caveman.png" alt="Cavens" /></span>
    <span class="pedal" data-pedal data-pedal-key="68"><img src="/images/pedals/sarah.png" alt="Saraaah" /></span>
    <span class="pedal" data-pedal data-pedal-key="70"><img src="/images/pedals/caro.png" alt="Caro" /></span>
    <span class="pedal" data-pedal data-pedal-key="71"><img src="/images/pedals/tijs.png" alt="Titser" /></span>
</div>

<div class="flex justify-center relative -mt-8">
    <span class="pedal" data-pedal="" data-pedal-key="72"><img src="/images/pedals/marlo.png" alt="Verboven"></span>
    <span class="pedal" data-pedal="" data-pedal-key="74"><img src="/images/pedals/johnny.png" alt="King"></span>
    <span class="pedal" data-pedal="" data-pedal-key="75"><img src="/images/pedals/sofie.png" alt="Soof"></span>
    <span class="pedal" data-pedal="" data-pedal-key="76"><img src="/images/pedals/steffanie.png" alt="Steffie"></span>
</div>

<div class="flex justify-center">
    <div class="" style="width: 40vw; max-width:400px;">
        <img src="images/marshall.png" alt="This is not your regular amplifier">
    </div>
</div>

<div class="flex justify-center space-x-12 -mt-8">
    <label class="relative h-64 w-6 flex justify-center items-stretch effect-label" for="effect-distortion">
        <input type="checkbox" name="effect" id="effect-distortion" value="distortion" hidden>
        <div class="w-4 bg-black"></div>
        <img class="absolute bottom-0" src="images/mixer_button.png" alt="">
    </label>

    <label class="relative h-64 w-6 flex justify-center items-stretch rounded cursor-pointer effect-label" for="effect-delay">
        <input type="checkbox" name="effect" id="effect-delay" value="delay" hidden>
        <div class="w-4 bg-black"></div>
        <img class="absolute bottom-0" src="images/mixer_button.png" alt="">
    </label>

    <label class="relative h-64 w-6 flex justify-center items-stretch rounded cursor-pointer effect-label" for="effect-pingpong">
        <input type="checkbox" name="effect" id="effect-pingpong" value="pingpong" hidden>
        <div class="w-4 bg-black"></div>
        <img class="absolute bottom-0" src="images/mixer_button.png" alt="">
    </label>

    <label class="relative h-64 w-6 flex justify-center items-stretch rounded cursor-pointer effect-label" for="effect-flanger">
        <input type="checkbox" name="effect" id="effect-flanger" value="flanger" hidden>
        <div class="w-4 bg-black"></div>
        <img class="absolute bottom-0" src="images/mixer_button.png" alt="">
    </label>

    <label class="relative h-64 w-6 flex justify-center items-stretch rounded cursor-pointer effect-label" for="effect-tremolo">
        <input type="checkbox" name="effect" id="effect-tremolo" value="tremolo" hidden>
        <div class="w-4 bg-black"></div>
        <img class="absolute bottom-0" src="images/mixer_button.png" alt="">
    </label>

    <label class="relative h-64 w-6 flex justify-center items-stretch rounded cursor-pointer effect-label" for="effect-fuzz">
        <input type="checkbox" name="effect" id="effect-fuzz" value="fuzz" hidden>
        <div class="w-4 bg-black"></div>
        <img class="absolute bottom-0" src="images/mixer_button.png" alt="">
    </label>

    <label class="relative h-64 w-6 flex justify-center items-stretch rounded cursor-pointer effect-label" for="effect-reverb">
        <input type="checkbox" name="effect" id="effect-reverb" value="reverb" hidden>
        <div class="w-4 bg-black"></div>
        <img class="absolute bottom-0" src="images/mixer_button.png" alt="">
    </label>
</div>

<audio data-audio-key="81" src="audio/ik-fix-da.m4a"></audio>
<audio data-audio-key="83" src="audio/mybossrocks.m4a"></audio>
<audio data-audio-key="68" src="audio/kan-ik-al-een-factuur-maken-rock.m4a"></audio>
<audio data-audio-key="70" src="audio/vandaag-goeie-dag.m4a"></audio>
<audio data-audio-key="71" src="audio/pizza_kebab.m4a"></audio>
<audio data-audio-key="72" src="audio/marlo.m4a"></audio>
<audio data-audio-key="74" src="audio/johnny.m4a"></audio>
<audio data-audio-key="75" src="audio/Ik-ben-krokodillengroen.m4a"></audio>
<audio data-audio-key="76" src="audio/mybossrocks.m4a"></audio>

<script>


    window.addEventListener('DOMContentLoaded', function(){

        const audioFiles = document.querySelectorAll('audio');
        const effectInputs = document.querySelectorAll('input[name="effect"]');

        let audioTracks = {};
        let audioGroup;
        const availableEffects = {
            distortion: new Pizzicato.Effects.Distortion({
                gain: 0.4
            }),
            delay: new Pizzicato.Effects.Delay({
                feedback: 0.6,
                time: 0.22,
                mix: 0.75
            }),
            reverb: new Pizzicato.Effects.Reverb({
                time: 1,
                decay: 0.8,
                reverse: false,
                mix: 0.5
            }),
            pingpong: new Pizzicato.Effects.PingPongDelay({
                feedback: 0.3,
                time: 0.2,
                mix: 0.68
            }),
            fuzz: new Pizzicato.Effects.Quadrafuzz({
                lowGain: 0.6,
                midLowGain: 0.8,
                midHighGain: 0.5,
                highGain: 0.9,
            }),
            flanger: new Pizzicato.Effects.Flanger({
                time: 0.45,
                speed: 0.2,
                depth: 0.5,
                feedback: 0.3,
                mix: 0.5
            }),
            tremolo: new Pizzicato.Effects.Tremolo({
                speed: 20,
                depth: 1,
                mix: 0.8
            }),
        };

        // Load files as audio tracks
        audioFiles.forEach(el => {
            const index = el.getAttribute('data-audio-key');
            audioTracks[index] = new Pizzicato.Sound(el.getAttribute('src'));
        });

        // Group tracks together so we can add and remove effects easily
        audioGroup = new Pizzicato.Group(Object.values(audioTracks));

        function toggleEffect(e) {

            const activateEffect = e.target.checked;

            // TODO: fetch connected effect name
            // fetch effect class (change switch statement with effectCatalog)
            // remove or add this effect class
            const effectKey = e.target.value;

            // Add effect
            if(activateEffect) {
                console.log('adding ' + effectKey)

                audioGroup.addEffect(availableEffects[effectKey]);
                e.target.parentElement.classList.add('active')
                return;
            }

            // Remove effect
            console.log('removing ' + effectKey)

            audioGroup.removeEffect(availableEffects[effectKey]);
            e.target.parentElement.classList.remove('active')
        }

        function playSound(e)
        {
            // In case of keypress or click...
            const index = e.keyCode

            var audio = audioTracks[index];

            if(null == audio) return;

            audio.stop();
            audio.play();

            var trigger = document.querySelector(`[data-pedal-key="${index}"]`);
            trigger.classList.add('playing');
        }

        function removeTransition(e) {
            if('transform' !== e.propertyName) return;
            this.classList.remove('playing');
        }

        function addEffect(audio, type)
        {
            const availableEffects = {
                distortion: new Pizzicato.Effects.Distortion({
                    gain: 0.4
                }),
                delay: new Pizzicato.Effects.Delay({
                    feedback: 0.6,
                    time: 0.22,
                    mix: 0.75
                }),
                reverb: new Pizzicato.Effects.Reverb({
                    time: 1,
                    decay: 0.8,
                    reverse: false,
                    mix: 0.5
                }),
                pingpong: new Pizzicato.Effects.PingPongDelay({
                    feedback: 0.3,
                    time: 0.2,
                    mix: 0.68
                }),
                fuzz: new Pizzicato.Effects.Quadrafuzz({
                    lowGain: 0.6,
                    midLowGain: 0.8,
                    midHighGain: 0.5,
                    highGain: 0.9,
                }),
                flanger: new Pizzicato.Effects.Flanger({
                    time: 0.45,
                    speed: 0.2,
                    depth: 0.5,
                    feedback: 0.3,
                    mix: 0.5
                }),
                tremolo: new Pizzicato.Effects.Tremolo({
                    speed: 20,
                    depth: 1,
                    mix: 0.8
                }),
            };
        }

        // Event listeners
        const keys = document.querySelectorAll('[data-pedal-key]');
        keys.forEach(key => key.addEventListener('transitionend',removeTransition));

        window.addEventListener('keydown',playSound);

        effectInputs.forEach(effectInput => {
            effectInput.addEventListener('change', toggleEffect);
        })
    });


</script>


</body>
</html>
